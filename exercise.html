<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Exercise</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="style.css">

<style>
body {
  font-family: Arial, sans-serif;
  background:#1a1a1a;
  color:white;
  margin:0;
}

/* NAVBAR */
.navbar {
  width:250px;
  height:100%;
  position:fixed;
  top:0;
  left:-250px;
  background:#333;
  padding-top:60px;
  transition:0.3s;
}
.navbar a {
  color:white;
  padding:12px 20px;
  display:block;
  text-decoration:none;
}
.navbar a:hover { background:red; }

.hamburger {
  position:fixed;
  top:20px;
  left:20px;
  font-size:30px;
  cursor:pointer;
  z-index:1001;
}

/* LOGO */
.logo-container {
  display:flex;
  justify-content:center;
  margin-top:30px;
}
.logo { width:120px; }

/* CONTAINERS */
.container, #container1, #container2 {
  max-width:800px;
  margin:40px auto;
  background:rgba(0,0,0,0.2);
  padding:20px;
  border-radius:8px;
  box-shadow:0 4px 10px rgba(255,255,255,0.4);
}

/* FORM */
select, input, button {
  width:100%;
  padding:10px;
  margin:10px 0;
  background:rgba(0,0,0,0.3);
  color:white;
  border:none;
}
button {
  background:red;
  cursor:pointer;
}
button:hover { background:#cc0000 }

/* SELECTED EXERCISES */
.selected-exercise {
  background:rgba(0,0,0,0.4);
  padding:10px;
  margin:5px 0;
  display:flex;
  justify-content:space-between;
}
.remove-button {
  background:red;
  color:white;
  border:none;
  padding:5px;
}

/* MOBILE */
@media(max-width:768px){
  .container, #container1, #container2 {
    width:90%;
  }
}
</style>
</head>

<body>

<div class="hamburger" onclick="toggleNavbar()">â˜°</div>

<div class="navbar" id="navbar">
  <h3 style="text-align:center">Welcome, User</h3>
  <a href="home.html">Home</a>
  <a href="exercise.html">Exercise</a>
  <a href="profile.html">Profile</a>
  <a href="diet.html">Diet</a>
  <a href="membership.html">Membership</a>
</div>

<div class="logo-container">
  <img src="images/logo1.png" class="logo">
</div>

<!-- EXERCISE SELECTION -->
<div class="container">
<h2>Select an Exercise</h2>

<select id="exerciseSelect">
  <option value="">Select Exercise</option>
  <optgroup label="Cardio">
    <option value="Running|300">Running (300 Calories)</option>
    <option value="Cycling|250">Cycling (250 Calories)</option>
  </optgroup>
  <optgroup label="Strength">
    <option value="Push Ups|100">Push Ups (100 Calories)</option>
    <option value="Squats|150">Squats (150 Calories)</option>
  </optgroup>
</select>

<button onclick="addExercise()">Save Exercise</button>

<h3>Selected Exercises</h3>
<div id="selectedExercises"></div>

<button onclick="saveWorkout()">Save Custom Workout</button>
</div>

<!-- BMI CALCULATOR -->
<div id="container2">
<h3>Calculate BMI</h3>

<input type="number" id="height" placeholder="Height (meters)" step="0.01">
<input type="number" id="weight" placeholder="Weight (kg)" step="0.1">
<button onclick="calculateBMI()">Calculate BMI</button>
</div>

<!-- BMI CHART -->
<div id="container1">
<h3>Your BMI Over Time</h3>
<canvas id="bmiChart"></canvas>
</div>

<script>
/* NAVBAR */
function toggleNavbar(){
  navbar.style.left = navbar.style.left==="0px" ? "-250px" : "0px";
}

/* EXERCISES */
let selected = JSON.parse(localStorage.getItem("selectedExercises")) || [];

function renderSelected(){
  selectedExercises.innerHTML="";
  selected.forEach((e,i)=>{
    selectedExercises.innerHTML+=`
      <div class="selected-exercise">
        ${e.name} (${e.cal} cal)
        <button class="remove-button" onclick="removeExercise(${i})">Remove</button>
      </div>`;
  });
}
renderSelected();

function addExercise(){
  if(!exerciseSelect.value) return;
  const [name,cal]=exerciseSelect.value.split("|");
  selected.push({name,cal:Number(cal)});
  localStorage.setItem("selectedExercises",JSON.stringify(selected));
  renderSelected();
}

function removeExercise(i){
  selected.splice(i,1);
  localStorage.setItem("selectedExercises",JSON.stringify(selected));
  renderSelected();
}

function saveWorkout(){
  let workouts=JSON.parse(localStorage.getItem("workouts"))||[];
  workouts.push({date:new Date().toISOString(), exercises:selected});
  localStorage.setItem("workouts",JSON.stringify(workouts));
  selected=[];
  localStorage.removeItem("selectedExercises");
  renderSelected();
  alert("Workout Saved!");
}

/* BMI */
let bmiHistory = JSON.parse(localStorage.getItem("bmiHistory")) || [];

function calculateBMI(){
  const h=parseFloat(height.value);
  const w=parseFloat(weight.value);
  if(!h||!w) return;
  const bmi=(w/(h*h)).toFixed(2);
  bmiHistory.push({date:new Date().toLocaleDateString(), bmi});
  localStorage.setItem("bmiHistory",JSON.stringify(bmiHistory));
  renderChart();
  alert("Your BMI: "+bmi);
}

/* BMI CHART */
function renderChart(){
  const ctx=document.getElementById("bmiChart");
  const labels=bmiHistory.map(x=>x.date);
  const data=bmiHistory.map(x=>x.bmi);
  new Chart(ctx,{
    type:"line",
    data:{
      labels,
      datasets:[{
        label:"BMI",
        data,
        borderColor:"rgba(75,192,192,1)",
        backgroundColor:"rgba(75,192,192,0.2)",
        fill:true
      }]
    },
    options:{responsive:true}
  });
}
renderChart();
</script>

</body>
</html>
