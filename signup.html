<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign Up</title>

<link rel="stylesheet" href="style.css">

<style>
/* (NO CHANGES HERE) */
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #1a1a1a;
}
/* rest of your CSS exactly same */
</style>
</head>

<body>

<!-- LOGO -->
<div class="logo-container">
  <img src="images/Logo1.png" alt="Logo" class="logo-img">
</div>

<!-- SIGNUP FORM -->
<div class="signup-container">
<h1>Sign Up</h1>

<form onsubmit="signup(event)">
  <div class="form-group">
    <label>Full Name</label>
    <input type="text" id="fullname" required>
  </div>

  <div class="form-group">
    <label>Username</label>
    <input type="text" id="username" required>
  </div>

  <div class="form-group">
    <label>Email</label>
    <input type="email" id="email" required>
  </div>

  <div class="form-group">
    <label>Password</label>
    <input type="password" id="password" required>
  </div>

  <button class="btn">Sign Up</button>
</form>

<p class="login-link">
  Already have an account?
  <a href="index.html">Log in</a>
</p>

<div class="extra-links">
  <a href="admin.html">Admin Panel</a> |
  <a href="trainer.html">Trainer Panel</a>
</div>

<p id="error" class="error"></p>
</div>

<!-- ✅ SUPABASE -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
const SUPABASE_URL = "https://mcvfdjrbcwnfhrsuquil.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1jdmZkanJiY3duZmhyc3VxdWlsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MDg3MjgsImV4cCI6MjA4NDQ4NDcyOH0.HB-SFOE_XuZKXMn7gVzsO8EY9rgPpW9ws3m-QVS0lmI";

const supabase = supabase.createClient(
  SUPABASE_URL,
  SUPABASE_ANON_KEY
);

async function signup(e){
  e.preventDefault();

  const fullnameInput = document.getElementById("fullname");
  const usernameInput = document.getElementById("username");
  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");
  const error = document.getElementById("error");

  error.innerText = ""; // clear old errors

  const email = emailInput.value.trim();
  const password = passwordInput.value;
  const fullname = fullnameInput.value.trim();
  const username = usernameInput.value.trim();

  /* 1️⃣ CREATE AUTH USER */
  const { data, error: authError } = await supabase.auth.signUp({
    email,
    password
  });

  if (authError) {
    error.innerText = authError.message;
    return;
  }

  /* 2️⃣ INSERT INTO USERS TABLE */
  const { error: insertError } = await supabase.from("users").insert({
    uid: data.user.id,
    fullname,
    username,
    email,
    role: "user"
  });

  if (insertError) {
    error.innerText = insertError.message;
    return;
  }

  /* ✅ SUCCESS */
  alert("✅ Signup successful! Please login.");
  window.location.href = "index.html";
}
</script>

</body>
</html>


